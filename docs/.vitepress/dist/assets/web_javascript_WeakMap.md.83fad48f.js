import{_ as a,c as s,o as e,d as n}from"./app.b8b79069.js";const h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"WeakMap\u7684\u7279\u70B9","slug":"weakmap\u7684\u7279\u70B9","link":"#weakmap\u7684\u7279\u70B9","children":[]},{"level":2,"title":"\u57FA\u672C\u4F7F\u7528","slug":"\u57FA\u672C\u4F7F\u7528","link":"#\u57FA\u672C\u4F7F\u7528","children":[]},{"level":2,"title":"WeakMap\u7684\u8BBE\u8BA1","slug":"weakmap\u7684\u8BBE\u8BA1","link":"#weakmap\u7684\u8BBE\u8BA1","children":[]},{"level":2,"title":"WeakMap \u548C Map\u7684\u533A\u522B","slug":"weakmap-\u548C-map\u7684\u533A\u522B","link":"#weakmap-\u548C-map\u7684\u533A\u522B","children":[{"level":3,"title":"1. Map\u7684\u952E\u53EF\u4EE5\u662F\u4EFB\u610F\u7C7B\u578B\uFF0CWeakMap\u7684\u952E\u53EA\u80FD\u662F\u5BF9\u8C61","slug":"_1-map\u7684\u952E\u53EF\u4EE5\u662F\u4EFB\u610F\u7C7B\u578B-weakmap\u7684\u952E\u53EA\u80FD\u662F\u5BF9\u8C61","link":"#_1-map\u7684\u952E\u53EF\u4EE5\u662F\u4EFB\u610F\u7C7B\u578B-weakmap\u7684\u952E\u53EA\u80FD\u662F\u5BF9\u8C61","children":[]},{"level":3,"title":"2.Map\u7684\u952E\u662F\u5F3A\u5F15\u7528\uFF0CWeakMap\u7684\u952E\u662F\u5F31\u5F15\u7528\uFF0C\u672A\u88AB\u5176\u4ED6\u5F15\u7528\u4F1A\u88AB\u5783\u573E\u56DE\u6536\u673A\u5236\u56DE\u6536","slug":"_2-map\u7684\u952E\u662F\u5F3A\u5F15\u7528-weakmap\u7684\u952E\u662F\u5F31\u5F15\u7528-\u672A\u88AB\u5176\u4ED6\u5F15\u7528\u4F1A\u88AB\u5783\u573E\u56DE\u6536\u673A\u5236\u56DE\u6536","link":"#_2-map\u7684\u952E\u662F\u5F3A\u5F15\u7528-weakmap\u7684\u952E\u662F\u5F31\u5F15\u7528-\u672A\u88AB\u5176\u4ED6\u5F15\u7528\u4F1A\u88AB\u5783\u573E\u56DE\u6536\u673A\u5236\u56DE\u6536","children":[]},{"level":3,"title":"3. Map\u53EF\u88AB\u904D\u5386\uFF0C\u652F\u6301.keys()\u3001.values()\u3001.entries()\u3001forEach()\uFF0CWeakMap\u4E0D\u53EF\u88AB\u904D\u5386\uFF0C\u6CA1\u6709size\u5C5E\u6027\uFF0C\u6240\u4EE5WeakMap\u4E0D\u9002\u5408\u505A\u4E00\u4E9B\u53D1\u5E03\u8BA2\u9605","slug":"_3-map\u53EF\u88AB\u904D\u5386-\u652F\u6301-keys-\u3001-values-\u3001-entries-\u3001foreach-weakmap\u4E0D\u53EF\u88AB\u904D\u5386-\u6CA1\u6709size\u5C5E\u6027-\u6240\u4EE5weakmap\u4E0D\u9002\u5408\u505A\u4E00\u4E9B\u53D1\u5E03\u8BA2\u9605","link":"#_3-map\u53EF\u88AB\u904D\u5386-\u652F\u6301-keys-\u3001-values-\u3001-entries-\u3001foreach-weakmap\u4E0D\u53EF\u88AB\u904D\u5386-\u6CA1\u6709size\u5C5E\u6027-\u6240\u4EE5weakmap\u4E0D\u9002\u5408\u505A\u4E00\u4E9B\u53D1\u5E03\u8BA2\u9605","children":[]},{"level":3,"title":"4. Map \u666E\u901A\u952E\u503C\u5BF9\u5B58\u50A8\uFF0C\u53EF\u67E5\u53EF\u904D\u5386\uFF0CWeakMap\u9002\u7528\u4E8E\u79C1\u6709\u6570\u636E\u7ED1\u5B9A\uFF0C\u7F13\u5B58\uFF0C\u9690\u85CF\u6570\u636E\u7B49","slug":"_4-map-\u666E\u901A\u952E\u503C\u5BF9\u5B58\u50A8-\u53EF\u67E5\u53EF\u904D\u5386-weakmap\u9002\u7528\u4E8E\u79C1\u6709\u6570\u636E\u7ED1\u5B9A-\u7F13\u5B58-\u9690\u85CF\u6570\u636E\u7B49","link":"#_4-map-\u666E\u901A\u952E\u503C\u5BF9\u5B58\u50A8-\u53EF\u67E5\u53EF\u904D\u5386-weakmap\u9002\u7528\u4E8E\u79C1\u6709\u6570\u636E\u7ED1\u5B9A-\u7F13\u5B58-\u9690\u85CF\u6570\u636E\u7B49","children":[]},{"level":3,"title":"5. WeakMap\u5B89\u5168\u6027\u66F4\u9AD8\u4E00\u4E9B","slug":"_5-weakmap\u5B89\u5168\u6027\u66F4\u9AD8\u4E00\u4E9B","link":"#_5-weakmap\u5B89\u5168\u6027\u66F4\u9AD8\u4E00\u4E9B","children":[]}]}],"relativePath":"web/javascript/WeakMap.md"}'),p={name:"web/javascript/WeakMap.md"},l=n(`<h2 id="weakmap\u7684\u7279\u70B9" tabindex="-1">WeakMap\u7684\u7279\u70B9 <a class="header-anchor" href="#weakmap\u7684\u7279\u70B9" aria-hidden="true">#</a></h2><ul><li>WeakMap\u7684key\u5FC5\u987B\u662F\u5BF9\u8C61\uFF0C\u4E0D\u80FD\u7528\u539F\u59CB\u503C\u4F5C\u4E3A key</li><li>WeakMap\u7684\u952E\u662F\u5F31\u5F15\u7528\u7684\uFF0C\u5F53\u8FD9\u4E2A\u952E\u6CA1\u6709\u88AB\u5176\u4ED6\u5F3A\u5F15\u7528\uFF0C\u5C31\u4F1A\u88AB\u5783\u573E\u56DE\u6536\u5668\uFF08GC\uFF09\u56DE\u6536</li><li>\u4E0D\u53EF\u679A\u4E3E</li><li>\u4E0D\u53EF\u83B7\u53D6size</li></ul><h2 id="\u57FA\u672C\u4F7F\u7528" tabindex="-1">\u57FA\u672C\u4F7F\u7528 <a class="header-anchor" href="#\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">const wm = new WeakMap();</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">const obj = { id: 123 };</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">wm.set(obj, &#39;some data&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">wm.get(obj); // &#39;some data&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">wm.has(obj); // true</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">wm.delete(obj); // \u5220\u9664 key \u5BF9\u5E94\u7684 entry</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="weakmap\u7684\u8BBE\u8BA1" tabindex="-1">WeakMap\u7684\u8BBE\u8BA1 <a class="header-anchor" href="#weakmap\u7684\u8BBE\u8BA1" aria-hidden="true">#</a></h2><ul><li>\u9632\u6B62\u5185\u5B58\u6CC4\u6F0F</li><li>\u7ED9\u5BF9\u8C61\u7ED1\u5B9A\u4E34\u65F6\u6570\u636E</li><li>\u9002\u7528\u8BBE\u7F6E\u79C1\u6709\u5C5E\u6027</li><li>\u4E3A\u5BF9\u8C61\u7ED1\u5B9A\u989D\u5916\u5C5E\u6027\uFF0C\u4F46\u53C8\u4E0D\u6C61\u67D3\u5BF9\u8C61\u672C\u8EAB</li></ul><p>\u7ED1\u5B9A\u79C1\u6709\u5C5E\u6027\u7684\u4F8B\u5B50\uFF1A</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">const wm = new WeakMap();</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">function trackUser(userObj) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  wm.set(userObj, { loginAt: Date.now() });</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">function getLoginTime(userObj) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  return wm.get(userObj)?.loginAt;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">let user = { name: &#39;Alice&#39; };</span></span>
<span class="line"><span style="color:#A6ACCD;">trackUser(user);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">console.log(getLoginTime(user)); // \u8F93\u51FA\u65F6\u95F4\u6233</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">user = null; // user \u4E0D\u518D\u4F7F\u7528\uFF0Cwm \u4E2D\u81EA\u52A8\u88AB GC \u6E05\u9664</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u7F13\u5B58\u8BA1\u7B97\u7ED3\u679C\uFF1A</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">const expensiveCache = new WeakMap();</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">function compute(obj) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (!expensiveCache.has(obj)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    const result = heavyComputation(obj);</span></span>
<span class="line"><span style="color:#A6ACCD;">    expensiveCache.set(obj, result);</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">  return expensiveCache.get(obj);</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">function heavyComputation(obj) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  return obj.value ** 10;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">const obj = { value: 2 };</span></span>
<span class="line"><span style="color:#A6ACCD;">console.log(compute(obj)); // 1024</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="weakmap-\u548C-map\u7684\u533A\u522B" tabindex="-1">WeakMap \u548C Map\u7684\u533A\u522B <a class="header-anchor" href="#weakmap-\u548C-map\u7684\u533A\u522B" aria-hidden="true">#</a></h2><h3 id="_1-map\u7684\u952E\u53EF\u4EE5\u662F\u4EFB\u610F\u7C7B\u578B-weakmap\u7684\u952E\u53EA\u80FD\u662F\u5BF9\u8C61" tabindex="-1">1. Map\u7684\u952E\u53EF\u4EE5\u662F\u4EFB\u610F\u7C7B\u578B\uFF0CWeakMap\u7684\u952E\u53EA\u80FD\u662F\u5BF9\u8C61 <a class="header-anchor" href="#_1-map\u7684\u952E\u53EF\u4EE5\u662F\u4EFB\u610F\u7C7B\u578B-weakmap\u7684\u952E\u53EA\u80FD\u662F\u5BF9\u8C61" aria-hidden="true">#</a></h3><h3 id="_2-map\u7684\u952E\u662F\u5F3A\u5F15\u7528-weakmap\u7684\u952E\u662F\u5F31\u5F15\u7528-\u672A\u88AB\u5176\u4ED6\u5F15\u7528\u4F1A\u88AB\u5783\u573E\u56DE\u6536\u673A\u5236\u56DE\u6536" tabindex="-1">2.Map\u7684\u952E\u662F\u5F3A\u5F15\u7528\uFF0CWeakMap\u7684\u952E\u662F\u5F31\u5F15\u7528\uFF0C\u672A\u88AB\u5176\u4ED6\u5F15\u7528\u4F1A\u88AB\u5783\u573E\u56DE\u6536\u673A\u5236\u56DE\u6536 <a class="header-anchor" href="#_2-map\u7684\u952E\u662F\u5F3A\u5F15\u7528-weakmap\u7684\u952E\u662F\u5F31\u5F15\u7528-\u672A\u88AB\u5176\u4ED6\u5F15\u7528\u4F1A\u88AB\u5783\u573E\u56DE\u6536\u673A\u5236\u56DE\u6536" aria-hidden="true">#</a></h3><h3 id="_3-map\u53EF\u88AB\u904D\u5386-\u652F\u6301-keys-\u3001-values-\u3001-entries-\u3001foreach-weakmap\u4E0D\u53EF\u88AB\u904D\u5386-\u6CA1\u6709size\u5C5E\u6027-\u6240\u4EE5weakmap\u4E0D\u9002\u5408\u505A\u4E00\u4E9B\u53D1\u5E03\u8BA2\u9605" tabindex="-1">3. Map\u53EF\u88AB\u904D\u5386\uFF0C\u652F\u6301<code>.keys()</code>\u3001<code>.values()</code>\u3001<code>.entries()</code>\u3001<code>forEach()</code>\uFF0CWeakMap\u4E0D\u53EF\u88AB\u904D\u5386\uFF0C\u6CA1\u6709size\u5C5E\u6027\uFF0C\u6240\u4EE5WeakMap\u4E0D\u9002\u5408\u505A\u4E00\u4E9B\u53D1\u5E03\u8BA2\u9605 <a class="header-anchor" href="#_3-map\u53EF\u88AB\u904D\u5386-\u652F\u6301-keys-\u3001-values-\u3001-entries-\u3001foreach-weakmap\u4E0D\u53EF\u88AB\u904D\u5386-\u6CA1\u6709size\u5C5E\u6027-\u6240\u4EE5weakmap\u4E0D\u9002\u5408\u505A\u4E00\u4E9B\u53D1\u5E03\u8BA2\u9605" aria-hidden="true">#</a></h3><h3 id="_4-map-\u666E\u901A\u952E\u503C\u5BF9\u5B58\u50A8-\u53EF\u67E5\u53EF\u904D\u5386-weakmap\u9002\u7528\u4E8E\u79C1\u6709\u6570\u636E\u7ED1\u5B9A-\u7F13\u5B58-\u9690\u85CF\u6570\u636E\u7B49" tabindex="-1">4. Map \u666E\u901A\u952E\u503C\u5BF9\u5B58\u50A8\uFF0C\u53EF\u67E5\u53EF\u904D\u5386\uFF0CWeakMap\u9002\u7528\u4E8E\u79C1\u6709\u6570\u636E\u7ED1\u5B9A\uFF0C\u7F13\u5B58\uFF0C\u9690\u85CF\u6570\u636E\u7B49 <a class="header-anchor" href="#_4-map-\u666E\u901A\u952E\u503C\u5BF9\u5B58\u50A8-\u53EF\u67E5\u53EF\u904D\u5386-weakmap\u9002\u7528\u4E8E\u79C1\u6709\u6570\u636E\u7ED1\u5B9A-\u7F13\u5B58-\u9690\u85CF\u6570\u636E\u7B49" aria-hidden="true">#</a></h3><h3 id="_5-weakmap\u5B89\u5168\u6027\u66F4\u9AD8\u4E00\u4E9B" tabindex="-1">5. WeakMap\u5B89\u5168\u6027\u66F4\u9AD8\u4E00\u4E9B <a class="header-anchor" href="#_5-weakmap\u5B89\u5168\u6027\u66F4\u9AD8\u4E00\u4E9B" aria-hidden="true">#</a></h3>`,16),o=[l];function c(i,t,r,C,A,d){return e(),s("div",null,o)}const m=a(p,[["render",c]]);export{h as __pageData,m as default};
