import{_ as s,c as a,o as e,d as n}from"./app.b8b79069.js";const h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u5728react\u4E2D\uFF0CsetState\u662F\u540C\u6B65\u8FD8\u662F\u5F02\u6B65\u7684\uFF1F","slug":"\u5728react\u4E2D-setstate\u662F\u540C\u6B65\u8FD8\u662F\u5F02\u6B65\u7684","link":"#\u5728react\u4E2D-setstate\u662F\u540C\u6B65\u8FD8\u662F\u5F02\u6B65\u7684","children":[{"level":3,"title":"react18+\u4EE5\u524D","slug":"react18-\u4EE5\u524D","link":"#react18-\u4EE5\u524D","children":[]},{"level":3,"title":"react18+\u4EE5\u540E","slug":"react18-\u4EE5\u540E","link":"#react18-\u4EE5\u540E","children":[]}]}],"relativePath":"web/react/setState\u540C\u6B65\u5F02\u6B65.md"}'),t={name:"web/react/setState\u540C\u6B65\u5F02\u6B65.md"},l=n(`<h2 id="\u5728react\u4E2D-setstate\u662F\u540C\u6B65\u8FD8\u662F\u5F02\u6B65\u7684" tabindex="-1">\u5728react\u4E2D\uFF0CsetState\u662F\u540C\u6B65\u8FD8\u662F\u5F02\u6B65\u7684\uFF1F <a class="header-anchor" href="#\u5728react\u4E2D-setstate\u662F\u540C\u6B65\u8FD8\u662F\u5F02\u6B65\u7684" aria-hidden="true">#</a></h2><p>\u5206\u4E24\u79CD\u60C5\u51B5\uFF0C\u5728react18+\u4EE5\u540E\uFF0C\u56E0\u4E3Areact\u5185\u90E8\u589E\u52A0\u4E86\u6279\u5904\u7406\u529F\u80FD\uFF0C\u51E0\u4E4E\u6240\u6709setState\u90FD\u662F\u5F02\u6B65\u7684</p><h3 id="react18-\u4EE5\u524D" tabindex="-1">react18+\u4EE5\u524D <a class="header-anchor" href="#react18-\u4EE5\u524D" aria-hidden="true">#</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">setTimeout(() =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">  setState(1); // \u540C\u6B65\u6267\u884C\u4E00\u6B21 setState</span></span>
<span class="line"><span style="color:#A6ACCD;">  setState(2); // \u518D\u540C\u6B65\u6267\u884C\u4E00\u6B21 setState</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5728setTimeout, setInterval, Promise, \u6216\u662F\u4E00\u4E9B\u5FAE\u4EFB\u52A1\u4E2D\u662F\u540C\u6B65\u7684</p><p>\u51FD\u6570\u5F0F\xA0<code>setState</code>\xA0\u89E3\u51B3\u5F02\u6B65\u4F9D\u8D56</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">this.setState((prevState) =&gt; ({ count: prevState.count + 1 }));</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// hooks</span></span>
<span class="line"><span style="color:#A6ACCD;">setData(count =&gt; count + 1)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="react18-\u4EE5\u540E" tabindex="-1">react18+\u4EE5\u540E <a class="header-anchor" href="#react18-\u4EE5\u540E" aria-hidden="true">#</a></h3><p>\u9ED8\u8BA4\u542F\u7528\u81EA\u52A8\u6279\u5904\u7406\uFF0C\u5373\u4F7F\u662F\xA0<code>setTimeout</code>\u3001Promise \u7B49\u573A\u666F\u4E5F\u4F1A\u88AB\u6279\u91CF\u5904\u7406</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">// React 18 \u4E2D\u4EE5\u4E0B\u4EE3\u7801\u4F1A\u6279\u91CF\u66F4\u65B0</span></span>
<span class="line"><span style="color:#A6ACCD;">setTimeout(() =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">	setCount(c =&gt; c + 1);</span></span>
<span class="line"><span style="color:#A6ACCD;">	setName(&quot;New Name&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;">}, 1000);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h4 id="\u5982\u4F55\u624B\u52A8\u63A7\u5236\u6279\u5904\u7406" tabindex="-1">\u5982\u4F55\u624B\u52A8\u63A7\u5236\u6279\u5904\u7406 <a class="header-anchor" href="#\u5982\u4F55\u624B\u52A8\u63A7\u5236\u6279\u5904\u7406" aria-hidden="true">#</a></h4><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">import { flushSync } from &#39;react-dom&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">flushSync(() =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">  setCount(c =&gt; c + 1); // \u7ACB\u5373\u66F4\u65B0</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u65E7\u7248\u672C\uFF1A</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">import { unstable_batchedUpdates } from &#39;react-dom&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">setTimeout(() =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">  unstable_batchedUpdates(() =&gt; { // \u6279\u5904\u7406</span></span>
<span class="line"><span style="color:#A6ACCD;">    setCount(c =&gt; c + 1);</span></span>
<span class="line"><span style="color:#A6ACCD;">    setName(&quot;New Name&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;">  });</span></span>
<span class="line"><span style="color:#A6ACCD;">}, 1000);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div>`,14),p=[l];function c(o,r,i,C,d,A){return e(),a("div",null,p)}const y=s(t,[["render",c]]);export{h as __pageData,y as default};
